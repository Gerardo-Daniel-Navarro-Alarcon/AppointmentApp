<%= form_with(model: @appointment, local: true) do |form| %>
  <% if @appointment.errors.any? %>
    <div class="alert alert-danger">
      <h4><%= pluralize(@appointment.errors.count, "error") %> impidieron guardar esta cita:</h4>
      <ul>
        <% @appointment.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <!-- Campo: Empleado -->
  <div class="form-group mb-3">
    <%= form.label :employee_id, "Empleado" %>
    <%= form.collection_select :employee_id, @employees, :id, :name, 
        { prompt: "Seleccione un empleado" }, 
        { class: "form-select" } %>
  </div>

  <!-- Campo: Servicio -->
  <div class="form-group mb-3">
    <%= form.label :service_id, "Servicio" %>
    <%= form.collection_select :service_id, @services, :id, :name, 
        { prompt: "Seleccione un servicio" }, 
        { class: "form-select" } %>
  </div>

  <!-- Campo: Productos -->
  <div class="form-group mb-3">
    <%= form.label :product_ids, "Productos" %>
    <%= form.collection_select :product_ids, @products, :id, :name, 
        { prompt: "Seleccione productos" }, 
        { multiple: true, class: "form-select", size: 5 } %>
  </div>

  <!-- Campo: Fecha y Hora -->
  <div class="form-group mb-3">
    <%= form.label :appointment_date, "Fecha y Hora" %>
    <%= form.datetime_local_field :appointment_date, class: "form-control" %>
  </div>

  <!-- Campo: Estado -->
  <div class="form-group mb-3">
    <%= form.label :status, "Estado" %>
    <%= form.select :status, Appointment.statuses.keys.map { |s| [s.titleize, s] }, 
        { prompt: "Seleccione un estado" }, 
        { class: "form-select" } %>
  </div>

  <!-- Campo: Notas -->
  <div class="form-group mb-3">
    <%= form.label :notes, "Notas" %>
    <%= form.text_area :notes, class: "form-control", rows: 5 %>
  </div>

  <div class="actions">
    <%= form.submit "Guardar Cita", class: "btn btn-primary" %>
  </div>
<% end %>
